# Database Migration Tool

## Обзор

Создан отдельный инструмент `cmd/migrate` для управления миграциями базы данных, что обеспечивает лучшее разделение ответственности.

## Использование

### Применить миграции
```bash
go run ./cmd/migrate -direction=up
# или
make migrate-up
```

### Откатить миграции
```bash
go run ./cmd/migrate -direction=down
# или
make migrate-down
```

## Преимущества

✅ **Чистая архитектура**: Логика миграций отделена от основного приложения
✅ **CI/CD совместимость**: Инструмент можно использовать в автоматизированных процессах
✅ **Простота использования**: Понятный CLI интерфейс
✅ **Переиспользование**: Использует ту же логику миграций из пакета `internal/migrate`

## Изменения в CI/CD

Workflows обновлены для использования нового инструмента:

**Было:**
```yaml
go run ./cmd/server migrate up
```

**Стало:**
```yaml
go run ./cmd/migrate -direction=up
```

## Конфигурация

Инструмент использует те же переменные окружения, что и основное приложение:
- `DB_HOST`
- `DB_PORT` 
- `DB_USER`
- `DB_PASSWORD`
- `DB_NAME`
- `DB_SSL_MODE`

## Рефакторинг пакета migrate

Добавлены функции:
- `Down()` - для отката миграций
- `createMigrator()` - общая логика создания мигратора
- `logMigrationStatus()` - логирование статуса

Это обеспечивает:
- Код без дублирования (DRY)
- Лучшую обработку ошибок
- Согласованное логирование
