# План разработки API дневника тренировок

## Цели
- Минимальный API для трекинга тренировок: пользователи, упражнения, тренировки, сеты.
- Безопасная авторизация и аутентификация.
- Надёжное хранение данных в базе.

## Этапы
1. База инфраструктуры
   - Структура проекта (`cmd/server`, `internal/...`, `docs/`).
   - Базовый HTTP-сервер, endpoint `/health`.
   - Линтеры и форматирование: `golangci-lint`, `gofumpt`, `goimports`.

2. Конфигурация и наблюдаемость
   - Конфиг через переменные окружения (порт, база, режимы).
   - Логирование в JSON.
   - Грейсфул-шатдаун с контекстом.

3. База данных
   - Выбор СУБД: PostgreSQL.
   - Миграции (например, `golang-migrate`).
   - Модель данных: пользователи, упражнения, тренировки, сеты.
   - Репозитории и транзакции.

4. Аутентификация и авторизация
   - Регистрация/логин.
   - JWT access/refresh токены.
   - Роли/права при необходимости.

5. API v1
   - Пользователь: профиль, смена пароля.
   - Упражнения: CRUD.
   - Тренировки: создание, редактирование, список, удаление.
   - Сеты: добавление/редактирование.
   - Идемпотентность и валидация входных данных.

6. Нефункциональные требования
   - Обработка ошибок: единый формат ответа.
   - Тесты (unit/integration): headless, `go test ./...`.
   - Документация OpenAPI (генерация спекки).
   - Контейнеризация (Dockerfile, docker-compose для dev).

7. Дальнейшее
   - Рейт-лимитинг, кэширование, метрики.
   - Импорт/экспорт данных.
   - Нотификации (опц.).

## Первые задачи
- Инициализировать проект и `/health`.
- Настроить линтеры и форматтеры.
- Добавить PostgreSQL и миграции.
- Реализовать регистрацию и логин с JWT.
- Добавить CRUD по упражнениям и тренировкам.


